<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> WheelMove-ID : Pr√©-traitement</title>
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="stylesheet" href="CSS/style-pretrtmt.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
</head>
<body>
  <!-- En t√™te -->
  <header class="app-header">
    <div class="header-left">
      <a href="pretraitement.html" aria-label="Accueil">
        <img src="assets/logo_CERAH.svg" alt="Logo" class="header-logo" onerror="this.style.display='none'">
      </a>
    </div>
    <div class="header-center">
      <h1 class="app-title" data-i18n="pretrait_title">Pr√©-traitement des donn√©es</h1>
    </div>
    <div class="header-right">
      <a class="lang-flag" title="English">
        <img src="assets/flag-en.png" alt="EN" onerror="this.style.display='none'">
      </a>
      <button id="helpBtn" class="help-btn" type="button" aria-label="Aide" data-i18n="help_btn">Aide ?</button>
    </div>
  </header>

  <!-- Message si pas de javascript -->
  <noscript> 
    <div class="msg-noscript">
      ‚ö†Ô∏è <strong>JavaScript d√©sactiv√© !</strong><br>
      Cette page n√©cessite JavaScript pour fonctionner correctement.<br>
      Les fichiers CSV ne pourront pas √™tre charg√©s, les t√¢ches locomotrices ne seront pas calcul√©es, et les chronogrammes ne seront pas affich√©s.<br>
      Veuillez activer JavaScript dans votre navigateur pour utiliser toutes les fonctionnalit√©s.
    </div> 
  </noscript> 

  <!-- D√©but contenu -->
  <div class="container">
    <!-- Step1: Param√®tres globaux -->
    <div class="seuils-container">
      <details id="step1" open>
        <summary class="custom-summary">
          <span class="summary-text" data-i18n="pretrait_stp1"><strong>Param√®tres de pr√©-traitement</strong></span>
          <div class="summary-buttons">
            <span id="tickStep1" class="tick hidden">‚úî</span>
            <button id="validateStep1" data-i18n="valider">Valider</button>
            <button id="modifyStep1" class="modify-btn" data-i18n="modifier" disabled>Modifier</button>
          </div>
        </summary>
        <label>Fr√©quence d'acquisition (Hz) : <input type="number" id="freqIMU" step="10" min="10" value="100"></label>

        <div class="initial-filter">
          <label>Filtrage initial des donn√©es des gyroscopes et acc√©l√©rom√®tres :</label>
            <div class="filter-controls">
                <!-- Option : aucun -->
                <div class="filter-option">
                    <input type="radio" name="initialFilter" id="filterNone" value="none" checked>
                    <label for="filterNone">Aucun</label>
                </div>
                <!-- Option : MA -->
                <div class="filter-option">
                    <input type="radio" name="initialFilter" id="filterMA" value="ma">
                    <label for="filterMA">Moyenne glissante</label>
                    <!-- param√®tres MA -->
                    <div class="params" id="paramsMA">
                        <label for="maWindow">Fen√™tre de traitement :</label>
                        <input type="number" id="maWindow" min="3" step="2" value="5">
                    </div>
                </div>
                <!-- Option : SG -->
                <div class="filter-option">
                    <input type="radio" name="initialFilter" id="filterSG" value="SG">
                    <label for="filterSG">Savitzky‚ÄìGolay</label>
                    <!-- param√®tres SG -->
                    <div class="params" id="paramsSG">
                        <label for="sgWindow">Fen√™tre de traitement :</label>
                        <input type="number" id="sgWindow" min="3" step="2" value="7">
                        <label for="sgPoly">Ordre du polynome :</label>
                        <input type="number" id="sgPoly" min="1" max="9" step="1" value="2">
                    </div>
                </div>
            </div>
      </details>
    </div>

    <!-- Step2: Param√®tres du FRM -->
    <div class="seuils-container">
      <details id="step2" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n="pretrait_stp2"><strong>Param√®tres du FRM</strong></span>
          <div class="summary-buttons">
            <span id="tickStep2" class="tick hidden">‚úî</span>
            <button id="validateStep2" data-i18n="valider">Valider</button>
            <button id="modifyStep2" class="modify-btn" data-i18n="modifier" disabled>Modifier</button>
          </div>
        </summary>
          <label>Carossage (¬∞) : <input type="number" id="FRMcarrossage" step="1" min="0" value="0"></label>
          <div>
            <label for="FRMRayonRoue">
              <span class="toggle" id="toggleRayonCirc">
                <span id="onOpt" class="active">Rayon</span>
                <span id="offOpt">Circonf√©rence</span>
              </span>
              des roues arri√®res (cm) :
              <input type="number" id="FRMRayonRoues" step="0.1" min="1">
              <button class="modify-btn" type="button" id="toggleRayonsDiff">‚öôÔ∏è Diff√©rencier gauche/droite</button>
            </label>

            <div id="FRMRayonsSepares" style="display: none">
              <label>
                Gauche : <input type="number" id="FRMRayonRoueG" step="0.1" min="1">
                Droite : <input type="number" id="FRMRayonRoueD" step="0.1" min="1">
              </label>
            </div>
          </div>
          <label>Distance entre les points de contact sol/roues arri√®re (cm) : <input type="number" id="FRMdistCentresRoues" step="1" min="1"></label>
      </details>
    </div>

    <!-- Step3: Chargement de la statique -->
    <div class="seuils-container">
      <details id="step3" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n="pretrait_stp3"><strong>Acquisition statique</strong></span>
          <div class="summary-buttons">
            <span id="tickStep3" class="tick hidden">‚úî</span>
            <button id="validateStep3" data-i18n="valider">Valider</button>
            <button id="modifyStep3" class="modify-btn" data-i18n="modifier" disabled>Modifier</button>
          </div>
        </summary>
        <div class="load-container">
          <button id="loadStatic">Charger l'acquisition statique</button>
          <div id="dropZoneStatic" class="drop-zone">
            ou d√©posez le fichier ici
          </div>
        </div>
      </details>
      <!-- Tableau sp√©cifique Statique -->
      <div id="fileTableContainerStatique" class="file-table-container hidden">
        <table id="fileTableStatique"  class="dynamic-table">
          <colgroup>
            <col id="colFileNameStatique" class="colNom">
            <col>
            <col id="colActionStatique" class="colAction">
          </colgroup>
          <thead>
            <tr>
              <th>Nom du fichier</th>
              <th>Statut</th>
              <th style="white-space: nowrap;">Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- lignes ins√©r√©es dynamiquement -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Step4: Chargement de la ligne droite -->
    <div class="seuils-container">
      <details id="step4" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n="pretrait_stp4"><strong>Acquisition en ligne droite</strong></span>
          <div class="summary-buttons">
            <span id="tickStep4" class="tick hidden">‚úî</span>
            <button id="validateStep4" data-i18n="valider">Valider</button>
            <button id="modifyStep4" class="modify-btn" data-i18n="modifier" disabled>Modifier</button>
          </div>
        </summary>
        <div class="load-container">
          <button id="loadLigneDroite">Charger l'acquisition en ligne droite</button>
          <div id="dropZoneLigneDroite" class="drop-zone">
            ou d√©posez le fichier ici
          </div>
        </div>
      </details>
      <!-- Tableau sp√©cifique LigneDroite -->
      <div id="fileTableContainerLigneDroite" class="file-table-container hidden">
        <table id="fileTableLigneDroite"  class="dynamic-table">
          <colgroup>
            <col id="colFileNameLigneDroite" class="colNom">
            <col>
            <col id="colActionLigneDroite" class="colAction">
          </colgroup>
          <thead>
            <tr>
              <th>Nom du fichier</th>
              <th>Statut</th>
              <th style="white-space: nowrap;">Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- lignes ins√©r√©es dynamiquement -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Step5: Chargement des acquisitions √† traiter -->
    <div class="seuils-container">
      <details id="step5" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n="pretrait_stp5"><strong>Acquisitions √† traiter</strong></span>
          <div class="summary-buttons">
            <span id="tickStep5" class="tick hidden">‚úî</span>
            <button id="validateStep5" data-i18n="valider">Valider</button>
            <button id="modifyStep5" class="modify-btn" data-i18n="modifier" disabled>Modifier</button>
          </div>
        </summary>
        <div class="load-container">
          <button id="loadAcquis">Charger la (les) acquisition(s) √† traiter</button>
          <div id="dropZoneAcquis" class="drop-zone">
          ou d√©posez le(s) fichier(s) ici
          </div>
        </div>
      </details>
      <!-- Tableau sp√©cifique Acquis -->
      <div id="fileTableContainerAcquis" class="file-table-container hidden">
        <table id="fileTableAcquis"  class="dynamic-table">
          <colgroup>
            <col id="colFileNameAcquis" class="colNom">
            <col>
            <col id="colActionAcquis" class="colAction">
          </colgroup>
          <thead>
            <tr>
              <th>Nom du fichier</th>
              <th>Statut</th>
              <th style="white-space: nowrap;">Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- lignes ins√©r√©es dynamiquement -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Boutons de bas de page -->
    <div class="buttons-row-container">
      <button id="newFRMBtn" disabled> 
          <span class="btn-arrow">ü¢§</span> 
          <span class="btn-text" data-i18n="nouv_FRM">Nouveau FRM</span> 
      </button>
    
      <button id="saveDataIMUBtn" class="highlight-btn" disabled autocomplete="off" data-i18n="run_pipeline">
          Traiter les donn√©es
      </button>
    
      <button id="gotoIdentification" onclick="location.href='locomotion.html'">
        <span class="btn-text" data-i18n="identification_button">Aller √† l'identification des t√¢ches </span>
        <span class="btn-arrow">‚û™</span> 
      </button>
    </div>

    <div id="statusMsgSaveIMU"></div>
    
  </div>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo" aria-label="Pied de page">
    <nav aria-label="Liens pied de page">
      <a href="#modal-mentions" title="Mentions l√©gales" data-i18n="mentions_link">Mentions l√©gales</a>
      <span aria-hidden="true">|</span>
      <a href="#modal-contributeurs" title="Contributeurs" data-i18n="auteurs_link">Contributeurs</a>
      <span aria-hidden="true">|</span>
      <a href="https://www.mdpi.com/2409-9279/7/5/84" target="_blank" rel="noopener noreferrer" title="Publication associ√©e" data-i18n="publication_link">Publication associ√©e</a>
      <span aria-hidden="true">|</span>
      <a href="https://mobile.cerahtec.fr/fr/contact/cerah_site_invalides_recherches" target="_blank" rel="noopener noreferrer" title="Nous contacter" data-i18n="contact_link">Nous contacter</a>
    </nav>
  </footer>

  <!-- Boite modale Contributeurs -->
  <div id="modal-contributeurs" class="modal">
    <div class="modal-content">
      <a href="#!" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>

      <h2 data-i18n="auteurs_link">Contributeurs</h2>

      <div class="contributors-list compact">

        <!-- Contributeur 1 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Christophe Sauret</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Christophe-Sauret" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

        <!-- Contributeur 2 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Yoann Poulet</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Yoann-Poulet" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

        <!-- Contributeur 3 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Mathieu Deves</div>
            <div class="contributor-affiliation">
              Laboratoire Jeunesse Activit√© Physique et Sportive‚ÄîSant√© (J-AP2S) ‚Äì Universit√© de Toulon
            </div>
            <a href="https://www.researchgate.net/profile/Mathieu-Deves" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Boite modale Mentions l√©gales -->
  <div id="modal-mentions" class="modal">
    <div class="modal-content">
      <a href="#!" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>

      <h2>Mentions l√©gales</h2>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
        Nulla facilisi. Vivamus id urna eget ligula dictum fringilla at nec ipsum. 
        Aenean vel nibh ac odio aliquet cursus. Donec id pretium arcu. 
        Suspendisse congue dictum dolor, vitae eleifend lorem suscipit a.
      </p>

      <p>
        Curabitur convallis tempus lacus at varius. Morbi nec iaculis tellus. 
        Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
        Sed sodales est vel sem fermentum, ac aliquam velit porttitor. 
        Integer vehicula libero nec urna sagittis, eget vulputate turpis tempor.
      </p>

      <p>
        Vivamus non interdum leo. Donec laoreet ullamcorper magna, 
        eu condimentum libero placerat vitae. Vestibulum consequat nec sapien id fermentum. 
        In hac habitasse platea dictumst.
      </p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js" defer></script>
  <script src="JS/i18n.js" defer></script>
  <script src="JS/common.js" defer></script>
  <script src="JS/pretraitement.js" defer></script>

</body>
</html>


