<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title> WheelMove-ID : Identification</title>
  <script src="https://cdn.plot.ly/plotly-3.1.0.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="stylesheet" href="CSS/style-ID.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
</head>
<body>
  <!-- En t√™te -->
  <header class="app-header">
    <div class="header-left">
      <a href="index.html" class="home-img">
        <img src="assets/home.jpeg" alt="Home" class="header-logo" onerror="this.style.display='üè†'">
      </a>
      <a href="locomotion.html" aria-label="Accueil">
        <img src="assets/logo_CERAH.svg" alt="Logo" class="header-logo" onerror="this.style.display='none'">
      </a>
    </div>
      <div class="header-center">
      <a href="locomotion.html" class="header-title">
        <h1 class="app-title" data-i18n="index_title">Analyse des t√¢ches locomotrices</h1>
      </a>
    </div>
    <div class="header-right">
      <a class="lang-flag" title="English">
        <img src="assets/flag-en.png" alt="EN" onerror="this.style.display='none'">
      </a>
      <button id="helpBtn" class="help-btn" type="button" aria-label="Aide" data-i18n="help_btn">Aide ?</button>
    </div>
  </header>

  <!-- Message si pas de javascript -->
  <noscript> 
    <div class="msg-noscript">
      ‚ö†Ô∏è <strong>JavaScript d√©sactiv√© !</strong><br>
      Cette page n√©cessite JavaScript pour fonctionner correctement.<br>
      Les fichiers CSV ne pourront pas √™tre charg√©s, les t√¢ches locomotrices ne seront pas calcul√©es, et les chronogrammes ne seront pas affich√©s.<br>
      Veuillez activer JavaScript dans votre navigateur pour utiliser toutes les fonctionnalit√©s.
    </div> 
  </noscript> 

  <!-- D√©but du contenu -->
  <div class="container">
    <!-- Grid des 4 boutons principaux -->
    <div class="actions-grid">
      <div class="action-block">
          <button id="loadDataBtn" class="highlight-btn" data-i18n="load_data_btn">Charger le(s) fichier(s)</button>
          <div id="dropZone" class="drop-zone" data-i18n="multiple_drop">ou d√©posez le(s) fichier(s) ici</div>
      </div>
      <div class="action-block">
          <button id="btnValidateFilesParam" disabled autocomplete="off" data-i18n="validate_files_params">Valider les fichier(s) et param√®tres</button>
          <div class="action-zone" id="statusMsgValidate"></div>
      </div>
      <div class="action-block">
          <button id="btnRunPipeline" disabled autocomplete="off" data-i18n="run_pipeline">Analyser</button>
          <div class="action-zone" id="statusMsgRun"></div>
      </div>
      <div class="action-block">
          <button id="saveDataBtn" disabled autocomplete="off" data-i18n="save_results">Sauvegarder</button>
          <div class="action-zone" id="statusMsgSave"></div>
      </div>
    </div>

    <!-- Tableau des acquisitions charg√©es -->
    <div id="fileTableContainer" class="file-table-container hidden">
      <table id="fileTable" class="dynamic-table">
        <colgroup>
        <col id="colFileName" class="colNom">
        <col>
        <col id="colAction" class="colAction">
      </colgroup>
        <thead>
          <tr>
            <th data-i18n="table_name">Nom du fichier</th>
            <th data-i18n="table_status">Statut</th>
            <th style="white-space: nowrap;" data-i18n="table_action">Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- lignes ins√©r√©es dynamiquement -->
        </tbody>
      </table>
    </div>

    <!-- Tableau param√®tres de seuils -->
    <div class="seuils-container">
      <details id="detailsParam" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n-html="seuils_titre"><strong>Param√®tres de traitement</strong></span>
          <div class="summary-buttons">
            <button id="btnLoadParameters" data-i18n="load" disabled>Charger</button>
            <button id="btnExportParameters" data-i18n="export" disabled>Exporter</button>
            <button id="resetSeuilsBtn" data-i18n="default" disabled>D√©faut</button>
          </div>
        </summary>
        <!-- AJOUTER LE CHOIX DE FENETRE DE TRAITEMENT (SEGMENTATION) -->
          <label data-i18n="frequence">Fr√©quence d'acquisition (Hz) : <input type="number" id="freqAcq" step="10"></label>
          <table class="fixed-table" data-i18n-html="seuils_table">
            <tr>
              <th>Signal</th>
              <th>√âtat 1</th>
              <th>Seuil</th>
              <th>√âtat 2</th>
              <th>Seuil</th>
              <th>√âtat 3</th>
            </tr>

            <tr>
              <td>Vitesse lin√©aire<br>absolue</td>
              <td>Statique</td>
              <td><input type="number" id="seuilVitLinAbs" step="0.1"></td>
              <td>En mouvement</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>

            <tr>
              <td>Vitesse angulaire<br>(¬∞/s)</td>
              <td>Ligne droite</td>
              <td><input type="number" id="seuilVitAngAbs" step="1"></td>
              <td>En rotation</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>

            <tr>
              <td>Rayon de courbure (m)</td>
              <td>Virage sur place</td>
              <td><input type="number" id="seuilRayonMin" step="0.1"></td>
              <td>Virage serr√©</td>
              <td><input type="number" id="seuilRayonMax" step="0.1"></td>
              <td>Virage large</td>
            </tr>
          </table>

          <label data-i18n="seuils_newseuilvitLin">Nouveau seuil vitLinAbs : <input type="number" id="newSeuilVitLinAbs" step="0.1"></label>
          <label data-i18n="seuils_newseuilvitAng">Nouveau seuil vitAngAbs : <input type="number" id="newSeuilVitAngAbs" step="1"></label>

      </details>
    </div>

    <!-- Checkbox pour choisir d'afficher vitesse lin√©aire ou angulaire -->
    <div id="plotPanel" class="legend-panel" aria-hidden="true">
      <div class="legend-controls" aria-label="Contr√¥les d'affichage">
        <label>
          <input type="checkbox" id="chkVitLin" checked autocomplete="off">
          <span data-i18n="chk_vit_lin">Vitesse lin√©aire</span>
        </label>
        <label>
          <input type="checkbox" id="chkVitAng" autocomplete="off">
          <span data-i18n="chk_vit_ang">Vitesse angulaire</span>
        </label>
      </div>
    </div>

    <!-- Chronogrammes ins√©r√©s dynamiquement -->
    <div id="chronogrammesContainer"></div>

    <!-- Persistent legend shown after running pipeline -->
    <div id="legendPanel" class="legend-panel" aria-hidden="true">
      <div class="legend-inner">
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,0,0,0.2)" data-i18n-src></span> <span data-i18n="legend_statique">Statique</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,255,0,0.2)"></span> <span data-i18n="legend_prop_avant">Propulsion avant</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,255,0,0.2)"></span> <span data-i18n="legend_prop_arriere">Propulsion arri√®re</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,0,255,0.2)"></span> <span data-i18n="legend_pivot">Pivot</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,255,255,0.2)"></span> <span data-i18n="legend_virage_serre">Virage serr√©</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,0,255,0.2)"></span> <span data-i18n="legend_virage_large">Virage large</span></span>
        <div class="summary-buttons">
          <button id="btnExportLegend" data-i18n="export">Exporter</button>
        </div>
      </div>
    </div>
    
  </div>

  <footer class="site-footer" role="contentinfo" aria-label="Pied de page">
    <nav aria-label="Liens pied de page">
      <a href="#modal-mentions" title="Mentions l√©gales" data-i18n="mentions_link">Mentions l√©gales</a>
      <span aria-hidden="true">|</span>
      <a href="#modal-contributeurs" title="Contributeurs" data-i18n="auteurs_link">Contributeurs</a>
      <span aria-hidden="true">|</span>
      <a href="https://www.mdpi.com/2409-9279/7/5/84" target="_blank" rel="noopener noreferrer" title="Publication associ√©e" data-i18n="publication_link">Publication associ√©e</a>
      <span aria-hidden="true">|</span>
      <a href="https://mobile.cerahtec.fr/fr/contact/cerah_site_invalides_recherches" target="_blank" rel="noopener noreferrer" title="Nous contacter" data-i18n="contact_link">Nous contacter</a>
    </nav>
  </footer>

  <!-- Boite modale Contributeurs -->
  <div id="modal-contributeurs" class="modal">
    <div class="modal-content">
      <a href="#!" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>

      <h2>Contributeurs</h2>

      <div class="contributors-list compact">

        <!-- Contributeur 1 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Christophe Sauret</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Christophe-Sauret" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

        <!-- Contributeur 2 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Yoann Poulet</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Yoann-Poulet" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

        <!-- Contributeur 3 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Mathieu Deves</div>
            <div class="contributor-affiliation">
              Laboratoire Jeunesse Activit√© Physique et Sportive‚ÄîSant√© (J-AP2S) ‚Äì Universit√© de Toulon
            </div>
            <a href="https://www.researchgate.net/profile/Mathieu-Deves" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Boite modale Mentions l√©gales -->
  <div id="modal-mentions" class="modal">
    <div class="modal-content">
      <a href="#!" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>
      <div data-i18n-html="mentions_legal">
        <h2>Mentions l√©gales</h2>

        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
          Nulla facilisi. Vivamus id urna eget ligula dictum fringilla at nec ipsum. 
          Aenean vel nibh ac odio aliquet cursus. Donec id pretium arcu. 
          Suspendisse congue dictum dolor, vitae eleifend lorem suscipit a.
        </p>

        <p>
          Curabitur convallis tempus lacus at varius. Morbi nec iaculis tellus. 
          Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
          Sed sodales est vel sem fermentum, ac aliquam velit porttitor. 
          Integer vehicula libero nec urna sagittis, eget vulputate turpis tempor.
        </p>

        <p>
          Vivamus non interdum leo. Donec laoreet ullamcorper magna, 
          eu condimentum libero placerat vitae. Vestibulum consequat nec sapien id fermentum. 
          In hac habitasse platea dictumst.
        </p>
      </div>
    </div>
  </div>

  <script src="JS/i18n.js" defer></script>
  <script src="JS/common.js" defer></script>
  <script src="JS/locomotion.js" defer></script>

</body>
</html>
