<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title> WheelMove-ID : Identification</title>
  <script src="https://cdn.plot.ly/plotly-3.1.0.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="stylesheet" href="CSS/style-ID.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
</head>
<body>
  <!-- En t√™te -->
  <header class="app-header">
    <div class="header-left">
      <a href="index.html" class="home-img">
        <img src="assets/home.jpeg" alt="Home" class="header-logo" onerror="this.style.display='üè†'">
      </a>
      <img src="assets/logo_CERAH.svg" alt="Logo" class="header-logo" onerror="this.style.display='none'">
    </div>
      <div class="header-center">
      <a href="locomotion.html" class="header-title">
        <h1 class="header-title" data-i18n="index_title">Analyse des t√¢ches locomotrices</h1>
        <img class="img-soustitre" src="assets/soustitre_locomotion.svg" onerror="this.style.display='none'">
      </a>
    </div>
    <div class="header-right">
      <div class="lang-dropdown" role="region" aria-label="Language selector">
        <button id="langToggle" aria-haspopup="listbox" aria-expanded="false">
          Fran√ßais ‚ñæ
        </button>
        <ul id="langList" role="listbox" tabindex="-1" aria-labelledby="langToggle" hidden>
          <li role="option"><a href="/fr">Fran√ßais</a></li>
          <li role="option"><a href="/en">English</a></li>
          <li role="option"><a href="/es">Espa√±ol</a></li>
        </ul>
      </div>
      <button id="helpBtn" class="help-btn" type="button" aria-label="Aide" data-i18n="help_btn">Aide ?</button>
    </div>
  </header>

  <!-- Message si pas de javascript -->
  <noscript> 
    <div class="msg-noscript">
      ‚ö†Ô∏è <strong>JavaScript d√©sactiv√© !</strong><br>
      Cette page n√©cessite JavaScript pour fonctionner correctement.<br>
      Les fichiers CSV ne pourront pas √™tre charg√©s, les t√¢ches locomotrices ne seront pas calcul√©es, et les chronogrammes ne seront pas affich√©s.<br>
      Veuillez activer JavaScript dans votre navigateur pour utiliser toutes les fonctionnalit√©s.
    </div> 
  </noscript> 

  <!-- D√©but du contenu -->
  <div class="container">
    <!-- Grid des 4 boutons principaux -->
    <div class="actions-grid">
      <div class="action-block">
          <button id="loadDataBtn" class="highlight-btn" data-i18n="load_data_btn">Charger le(s) fichier(s)</button>
          <div id="dropZone" class="drop-zone" data-i18n="multiple_drop">ou d√©posez le(s) fichier(s) ici</div>
      </div>
      <div class="action-block">
          <button id="btnValidateFilesParam" disabled autocomplete="off" data-i18n-html="validate_files_params">Valider les fichier(s)</br>et param√®tres</button>
          <div class="action-zone" id="statusMsgValidate"></div>
      </div>
      <div class="action-block">
          <button id="btnRunPipeline" disabled autocomplete="off" data-i18n="run_pipeline">Analyser</button>
          <div class="action-zone" id="statusMsgRun"></div>
      </div>
      <div class="action-block">
          <button id="saveDataBtn" disabled autocomplete="off" data-i18n="save_results">Sauvegarder</button>
          <div class="action-zone" id="statusMsgSave"></div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Tableau des acquisitions charg√©es -->
    <div id="fileTableContainer" class="file-table-container hidden">
      <table id="fileTable" class="dynamic-table">
        <colgroup>
        <col id="colFileName" class="colNom">
        <col>
        <col id="colAction" class="colAction">
      </colgroup>
        <thead>
          <tr>
            <th data-i18n="table_name">Nom du fichier</th>
            <th data-i18n="table_status">Statut</th>
            <th style="white-space: nowrap;" data-i18n="table_action">Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- lignes ins√©r√©es dynamiquement -->
        </tbody>
      </table>
    </div>

    <!-- Tableau param√®tres de seuils -->
    <div class="seuils-container">
      <details id="detailsParam" class="locked">
        <summary class="custom-summary">
          <span class="summary-text" data-i18n-html="seuils_titre"><strong>Param√®tres de traitement</strong></span>
          <div class="summary-buttons">
            <button id="btnLoadParameters" data-i18n="load" disabled>Charger</button>
            <button id="btnExportParameters" data-i18n="export" disabled>Exporter</button>
            <button id="resetSeuilsBtn" data-i18n="default" disabled>D√©faut</button>
          </div>
        </summary>
        <!-- AJOUTER LE CHOIX DE FENETRE DE TRAITEMENT (SEGMENTATION) -->
          <label data-i18n="frequence">Fr√©quence d'acquisition (Hz) : <input type="number" id="freqAcq" step="10"></label>
          <label data-i18n="segmentation">Dur√©e de segmentation (s) : <input type="number" id="inptSegmentsec" step="0.01"></label>
          <table class="fixed-table" data-i18n-html="seuils_table">
            <tr>
              <th>Signal</th>
              <th>√âtat 1</th>
              <th>Seuil</th>
              <th>√âtat 2</th>
              <th>Seuil</th>
              <th>√âtat 3</th>
            </tr>

            <tr>
              <td>Vitesse lin√©aire<br>absolue (m/s)</td>
              <td>Statique</td>
              <td><input type="number" id="seuilVitLinAbs" step="0.1"></td>
              <td>En mouvement</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>

            <tr>
              <td>Vitesse angulaire<br>(¬∞/s)</td>
              <td>Ligne droite</td>
              <td><input type="number" id="seuilVitAngAbs" step="1"></td>
              <td>En rotation</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>

            <tr>
              <td>Rayon de courbure (m)</td>
              <td>Virage sur place</td>
              <td><input type="number" id="seuilRayonMin" step="0.1"></td>
              <td>Virage serr√©</td>
              <td><input type="number" id="seuilRayonMax" step="0.1"></td>
              <td>Virage large</td>
            </tr>
          </table>

          <label data-i18n="seuils_newseuilvitLin">Seuil vitesse lin√©aire absolue pour traitement compl√©mentaire (m/s): <input type="number" id="newSeuilVitLinAbs" step="0.1"></label>
          <label data-i18n="seuils_newseuilvitAng">Seuil vitesse angulaire absolue pour traitement compl√©mentaire (¬∞/s): <input type="number" id="newSeuilVitAngAbs" step="1"></label>

      </details>
    </div>

    <!-- Checkbox pour choisir d'afficher vitesse lin√©aire ou angulaire -->
    <div id="plotPanel" class="legend-panel" aria-hidden="true">
      <div class="legend-controls" aria-label="Contr√¥les d'affichage">
        <label>
          <input type="checkbox" id="chkVitLin" checked autocomplete="off">
          <span data-i18n="chk_vit_lin">Vitesse lin√©aire</span>
        </label>
        <label>
          <input type="checkbox" id="chkVitAng" autocomplete="off">
          <span data-i18n="chk_vit_ang">Vitesse angulaire</span>
        </label>
      </div>
    </div>

    <!-- Chronogrammes ins√©r√©s dynamiquement -->
    <div id="chronogrammesContainer"></div>

    <!-- Persistent legend shown after running pipeline -->
    <div id="legendPanel" class="legend-panel" aria-hidden="true">
      <div class="legend-inner">
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,0,0,0.2)" data-i18n-src></span> <span data-i18n="legend_statique">Statique</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,255,0,0.2)"></span> <span data-i18n="legend_prop_avant">Propulsion avant</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,255,0,0.2)"></span> <span data-i18n="legend_prop_arriere">Propulsion arri√®re</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(255,0,255,0.2)"></span> <span data-i18n="legend_pivot">Pivot</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,255,255,0.2)"></span> <span data-i18n="legend_virage_serre">Virage serr√©</span></span>
        <span class="legend-item"><span class="legend-bullet" style="background:rgba(0,0,255,0.2)"></span> <span data-i18n="legend_virage_large">Virage large</span></span>
        <div class="summary-buttons">
          <button id="btnExportLegend" data-i18n="export_legend">Exporter la l√©gende</button>
        </div>
      </div>
    </div>
    
  </div>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo" aria-label="Pied de page">
    <nav aria-label="Liens pied de page">
      <button class="modal-trigger" data-target="modal-mentions" title="Mentions l√©gales" data-i18n="mentions_link">Mentions l√©gales</button>
      <span aria-hidden="true">|</span>
      <button class="modal-trigger" data-target="modal-contributeurs" title="Contributeurs" data-i18n="auteurs_link">Contributeurs</button>
      <span aria-hidden="true">|</span>
      <button class="modal-trigger" data-target="modal-publis" title="Publications associ√©es" data-i18n="publication_link">Publications associ√©es</button>
      <span aria-hidden="true">|</span>
      <!-- <a href="#modal-citation" title="Nous citer" data-i18n="citation_link">Nous citer</a>
      <span aria-hidden="true">|</span> -->
      <a href="https://mobile.cerahtec.fr/fr/contact/cerah_site_invalides_recherches" target="_blank" rel="noopener noreferrer" title="Nous contacter" data-i18n="contact_link">Nous contacter</a>
    </nav>
  </footer>

  <!-- Boite modale Mentions l√©gales -->
  <div id="modal-mentions" class="modal">
    <div class="modal-content">
      <a href="javascript:void(0)" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>
      <div data-i18n-html="mentions_legal">
        <h2>Mentions l√©gales</h2>
        <p>
          Cette application est mise gratuitement √† disposition dans le cadre de travaux de recherche scientifique et d‚Äôentra√Ænement sportif.
          Elle est fournie ¬´ en l‚Äô√©tat ¬ª et ne constitue en aucun cas un outil professionnel, certifi√© ou destin√© √† un usage r√©glement√©.
          Les auteurs, d√©veloppeurs et institutions partenaires d√©clinent toute responsabilit√© quant √† tout usage inappropri√© ou d√©tourn√© de l‚Äôapplication,
          ainsi que pour tout dommage direct ou indirect susceptible de r√©sulter de son utilisation, y compris en cas de d√©cision prise sur la base des informations ou r√©sultats qu‚Äôelle fournit.
        </p>
        <p>
          Les donn√©es saisies par l‚Äôutilisateur ne font l‚Äôobjet d‚Äôaucune collecte, conservation, transmission ou exploitation par les auteurs ou par des tiers.
          L‚Äôint√©gralit√© des traitements n√©cessaires au fonctionnement de l‚Äôapplication est ex√©cut√©e localement sur le terminal de l‚Äôutilisateur.
          Ce dernier demeure seul responsable des informations qu‚Äôil renseigne, de la configuration de son mat√©riel et des conditions d‚Äôutilisation du service.
          Les contenus, r√©sultats ou interpr√©tations g√©n√©r√©s par l‚Äôapplication ne sauraient √™tre consid√©r√©s comme refl√©tant de mani√®re officielle la position des institutions partenaires.
        </p>
        <p>
          Les auteurs se r√©servent le droit, √† leur seule discr√©tion, de mettre √† jour, modifier, suspendre ou supprimer l‚Äôacc√®s √† l‚Äôapplication, en tout ou partie, √† tout moment et sans pr√©avis.
          Ils ne garantissent ni la disponibilit√© continue du service, ni l‚Äôabsence d‚Äôerreurs, d‚Äôinterruptions ou d‚Äô√©ventuels dysfonctionnements.
        </p>
      </div>
    </div>
  </div>

  <!-- Boite modale Contributeurs -->
  <div id="modal-contributeurs" class="modal">
    <div class="modal-content">
      <a href="javascript:void(0)" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>
      <h2 data-i18n="auteurs_link">Contributeurs</h2>
      <div class="contributors-list compact">
        <!-- Contributeur 1 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Christophe Sauret</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Christophe-Sauret" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>
        <!-- Contributeur 2 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Yoann Poulet</div>
            <div class="contributor-affiliation">
              Centre de Recherches et d'Etudes sur l'Appareillage des Handicap√©s (CERAH) ‚Äì Institution nationale des Invalides
            </div>
            <a href="https://www.researchgate.net/profile/Yoann-Poulet" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>
        <!-- Contributeur 3 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">Mathieu Deves</div>
            <div class="contributor-affiliation">
              Laboratoire Jeunesse Activit√© Physique et Sportive‚ÄîSant√© (J-AP2S) ‚Äì Universit√© de Toulon
            </div>
            <a href="https://www.researchgate.net/profile/Mathieu-Deves" target="_blank" class="contributor-link">
              ResearchGate
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Boite modale Publications -->
  <div id="modal-publis" class="modal">
    <div class="modal-content">
      <a href="javascript:void(0)" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>
      <h2 data-i18n="publication_link">Publications associ√©es</h2>
      <div class="contributors-list compact">
        <!-- Publication 1 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name" data-i18n="pretraitement_button">Pr√©traitement</div>
            <div class="contributor-affiliation">
              Poulet, Y.; Brassart, F.; Simonetti, E.; Pillet, H.; Faupin, A.; Sauret, C. Analyzing Intra-Cycle Velocity Profile and Trunk Inclination during Wheelchair Racing Propulsion. Sensors 2023, 23, 58.
            </div>
            <a href=" https://doi.org/10.3390/s23010058" target="_blank" class="contributor-link">
              https://doi.org/10.3390/s23010058 
            </a>
          </div>
        </div>
        <!-- Publication 2 -->
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name" data-i18n="identification_button">Identifiaction des t√¢ches</div>
            <div class="contributor-affiliation">
              Deves, M.; Sauret, C.; Alberca, I.; Honnorat, L.; Poulet, Y.; Hays, A.; Faupin, A. Activity Identification, Classification, and Representation of Wheelchair Sport Court Tasks: A Method Proposal. Methods Protoc. 2024, 7, 84.
            </div>
            <a href="https://doi.org/10.3390/mps7050084" target="_blank" class="contributor-link">
              https://doi.org/10.3390/mps7050084 
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Boite modale citation -->
  <!-- <div id="modal-citation" class="modal">
    <div class="modal-content">
      <a href="#!" class="modal-close" aria-label="Fermer la fen√™tre">&times;</a>
      <h2 data-i18n="citation_link">Nous citer</h2>
      <div class="contributors-list compact">
        <div class="contributor-item compact">
          <div class="contributor-info">
            <div class="contributor-name">A faire</div>
            <div class="contributor-affiliation">
              Publier dans Journal of OpenSource Software pour obtenir un DOI √† mettre ici (ex : https://joss.theoj.org/papers/10.21105/joss.00927)
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->


  <script src="JS/i18n.js" defer></script>
  <script src="JS/common.js" defer></script>
  <script src="JS/locomotion.js" defer></script>

</body>
</html>
